{{ define "content" }}

    {{.Content}}

    {{ $siteScopes := .Site.Params.scopes }}
    {{ $siteScopesEnabled := .Site.Params.scopesEnabled }}
    {{ $pages := .Data.Pages }}
    
    {{ $index := 0 }}
  
    {{ range .Data.Pages.ByWeight }}

        {{ $isRendering := true }}

        {{ if $siteScopesEnabled }}
            {{ if isset .Params "scope" }}
                {{ $pageScopes := .Params.scope }}
                {{ $isRendering = gt (len (intersect $pageScopes $siteScopes)) 0 }}    
            {{ end }}
        {{ end }}

        {{ if $isRendering }}
            {{ .Scratch.Set "index" $index }}
            {{ partial "article" . }}
        {{ end }}

        {{ $index = add $index 1 }}

    {{ end }}
{{ end }}
