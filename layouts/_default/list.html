{{ define "content" }}

    {{.Content}}

    {{ $siteScopes := .Site.Params.scopes }}
    {{ $siteScopesEnabled := .Site.Params.scopesEnabled }}
    {{ $pages := .Data.Pages }}
  
    {{ range sort .Data.Pages "File.Path" }}

        {{ $isRendering := true }}

        {{ if $siteScopesEnabled }}
            {{ if isset .Params "scope" }}
                {{ $pageScopes := .Params.scope }}
                {{ $isRendering = gt (len (intersect $pageScopes $siteScopes)) 0 }}    
            {{ end }}
        {{ end }}

        {{ if $isRendering }}
            {{ partial "article" . }}
        {{ end }}

    {{ end }}
{{ end }}
