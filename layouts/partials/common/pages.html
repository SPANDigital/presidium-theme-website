{{/*  Returns the pages after filtering out the archived articles  */}}
{{ $pages := .Data.Pages }}
{{ if and $.Site.Params.archive (ne $.Site.Params.archive.age 0)}}
    {{ $age := mul 86400 $.Site.Params.archive.age }}
    {{ $before := sub now.Unix $age }}
    {{ $pages = where .Data.Pages "Date.Unix" "gt" $before }}
{{ end }}
{{ return $pages }}